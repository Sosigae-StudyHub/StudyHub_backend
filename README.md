# π’³ StudyHub - ν¬νΈμ› V2 κ²°μ  κ²€μ¦ API
### λΈλμΉ : feature/charge
### λ‹΄λ‹Ήμ : μ΄κ°€μ—°

- λ©μ : ν¬νΈμ› κ²°μ  κ²€μ¦ λ° ν¬μΈνΈ μ λ¦½ API κµ¬ν„
- μ΄ λ¨λ“μ€ ν¬νΈμ›(PortOne) V2 REST APIλ¥Ό κΈ°λ°μΌλ΅, ν΄λΌμ΄μ–ΈνΈ κ²°μ  μ™„λ£ μ΄ν›„ ν•΄λ‹Ή κ²°μ κ°€ μ‹¤μ λ΅ μ™„λ£λμ—λ”μ§€λ¥Ό κ²€μ¦ν•κ³ ,  
κ²€μ¦μ— μ„±κ³µν•λ©΄ μ‚¬μ©μμ—κ² ν¬μΈνΈλ¥Ό μ λ¦½ν•λ” κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤.
---

## π“¦ μ£Όμ” κΈ°λ¥

| κΈ°λ¥ | μ„¤λ… |
|------|------|
| `GET /payments/{paymentId}` νΈμ¶ | ν¬νΈμ› V2 REST APIλ΅ κ²°μ  λ‹¨κ±΄ μ΅°ν |
| κ²°μ  κΈμ•΅, μƒνƒ κ²€μ¦ | κΈμ•΅ μΌμΉ & μƒνƒ `PAID` μ—¬λ¶€ ν™•μΈ |
| μ‚¬μ©μ ν¬μΈνΈ μ λ¦½ | κ²°μ  μ„±κ³µ μ‹ ν•΄λ‹Ή μ‚¬μ©μ ν¬μΈνΈ μ¦κ°€ |
| κ²°μ  λ‚΄μ—­ κΈ°λ΅ | `payment_history` ν…μ΄λΈ”μ— μ €μ¥ |
---

## π” ν™κ²½ λ³€μ
```properties
portone.api-secret=${PORTONE_V2_API_SECRET}
```
- PORTONE_V2_API_SECRETμ€ ν¬νΈμ› μ½μ†”μ—μ„ λ°κΈ‰λ°›μ€ V2 μ „μ© μ‹ν¬λ¦Ώ ν‚¤

---
## π“ ν”„λ΅μ νΈ κµ¬μ΅° λ° μ—­ν• 
```
studyhub-backend/
β”β”€β”€ src/
β”‚   β””β”€β”€ main/
β”‚       β”β”€β”€ java/com/studyhub/
β”‚       β”‚   β”β”€β”€ controller/
β”‚       β”‚   β”‚   β””β”€β”€ PaymentVerificationController.java   # κ²°μ  κ²€μ¦ μ”μ²­μ„ μ²λ¦¬ν•λ” REST API μ»¨νΈλ΅¤λ¬
β”‚       β”‚   β”‚
β”‚       β”‚   β”β”€β”€ dto/
β”‚       β”‚   β”‚   β””β”€β”€ PaymentVerificationRequest.java      # κ²°μ  κ²€μ¦ μ”μ²­ λ°”λ””(paymentId, amount, userId) DTO
β”‚       β”‚   β”‚
β”‚       β”‚   β”β”€β”€ service/
β”‚       β”‚   β”‚   β”β”€β”€ PortOneService.java                  # ν¬νΈμ› κ²°μ  λ‹¨κ±΄ μ΅°ν μ„λΉ„μ¤ μΈν„°νμ΄μ¤
β”‚       β”‚   β”‚   β””β”€β”€ PaymentHistoryService.java           # ν¬μΈνΈ μ λ¦½ λ° κ²°μ  κΈ°λ΅ μ €μ¥ μ„λΉ„μ¤ μΈν„°νμ΄μ¤
β”‚       β”‚   β”‚
β”‚       β”‚   β”β”€β”€ service/impl/
β”‚       β”‚   β”‚   β”β”€β”€ PortOneServiceImpl.java              # ν¬νΈμ› V2 API νΈμ¶ λ° κ²°μ  κ²€μ¦ λ΅μ§ κµ¬ν„
β”‚       β”‚   β”‚   β””β”€β”€ PaymentHistoryServiceImpl.java       # μ‚¬μ©μ ν¬μΈνΈ μ¦κ°€ λ° κ²°μ  λ‚΄μ—­ μ €μ¥ λ΅μ§ κµ¬ν„
β”‚       β”‚   β”‚
β”‚       β”‚   β”β”€β”€ domain/
β”‚       β”‚   β”‚   β”β”€β”€ User.java                            # μ‚¬μ©μ μ •λ³΄ λ° ν„μ¬ ν¬μΈνΈ λ³΄μ  μƒνƒ κ΄€λ¦¬
β”‚       β”‚   β”‚   β””β”€β”€ PaymentHistory.java                  # κ²°μ  μ΄λ ¥ ν…μ΄λΈ” λ„λ©”μΈ
β”‚       β”‚   β”‚
β”‚       β”‚   β”β”€β”€ repository/
β”‚       β”‚   β”‚   β”β”€β”€ UserRepository.java                  # μ‚¬μ©μ μ΅°νμ© JPA λ¦¬ν¬μ§€ν† λ¦¬
β”‚       β”‚   β”‚   β””β”€β”€ PaymentHistoryRepository.java        # κ²°μ  μ΄λ ¥ μ €μ¥μ© λ¦¬ν¬μ§€ν† λ¦¬
β”‚       β”‚   β”‚
β”‚       β”‚   β””β”€β”€ config/
β”‚       β”‚       β””β”€β”€ PortOneProperties.java               # ν¬νΈμ› API μ‹ν¬λ¦Ώ μ„¤μ •μ„ μ„ν• ν™κ²½λ³€μ ν΄λμ¤ (@ConfigurationProperties)
β”‚       β”‚
β”‚       β””β”€β”€ resources/
β”‚           β”β”€β”€ application.properties                   # ν™κ²½λ³€μ μ£Όμ… μ„¤μ • ν¬ν•¨ (portone.api-secret)
β”‚
```                 
---

##π“ TODO
- [ ] μ‚¬μ©μ κ²°μ  λ‚΄μ—­ 
